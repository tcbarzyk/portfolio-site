---
// Topographic Hero - Flowing Wave Background
---

<div class="hero-container">
  <canvas id="topoCanvas"></canvas>
  <div class="hero-content" id="heroContent">
    <h1 class="name">TEDDY BARZYK</h1>
    <p class="title">Full-Stack Engineer</p>
    <div class="button-group">
      <button class="nav-button" data-section="about">About Me</button>
      <button class="nav-button" data-section="resume">Resume</button>
      <button class="nav-button" data-section="projects">Projects</button>
      <button class="nav-button" data-section="contact">Contact</button>
    </div>
  </div>
  <div class="content-panel" id="contentPanel">
    <button class="close-button" id="closeButton">×</button>
    <div class="panel-content" id="panelContent">
      <!-- Content will be dynamically inserted -->
    </div>
  </div>
</div>

<style>
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;700;900&display=swap');

  * {
    font-family: 'IBM Plex Sans', sans-serif;
  }

  .hero-container {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    background: #ffffff;
  }

  #topoCanvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .hero-content {
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    transition: opacity 0.6s ease;
  }

  .hero-content.hidden {
    opacity: 0;
    pointer-events: none;
  }

  .name {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: clamp(3rem, 10vw, 8rem);
    font-weight: 900;
    letter-spacing: -0.02em;
    color: #000000;
    margin: 0;
  }

  .title {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: clamp(1rem, 3vw, 2rem);
    font-weight: 300;
    color: #000000;
    margin-top: 1rem;
    letter-spacing: 0.05em;
  }

  .button-group {
    margin-top: 2.5rem;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .nav-button {
    padding: 0.9rem 2rem;
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 1rem;
    font-weight: 500;
    background: transparent;
    border: 2px solid #000000;
    color: #000000;
    cursor: pointer;
    transition: all 0.3s ease;
    letter-spacing: 0.05em;
  }

  .nav-button:hover {
    background: #000000;
    color: #ffffff;
  }

  .content-panel {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 900px;
    max-height: 85vh;
    overflow-y: auto;
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid #000000;
    padding: 3rem;
    z-index: 20;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.6s ease 0.3s;
  }

  .content-panel.visible {
    opacity: 1;
    pointer-events: auto;
  }

  .panel-content h2 {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 3.5rem;
    font-weight: 900;
    margin: 0 0 2rem 0;
    text-align: center;
  }

  .panel-content p {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 1.1rem;
    line-height: 1.8;
    color: #333;
    margin-bottom: 1rem;
  }

  .panel-content ul {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 1.1rem;
    line-height: 1.8;
    color: #333;
    margin-left: 1.5rem;
  }

  .panel-content a {
    font-family: 'IBM Plex Sans', sans-serif;
    color: #000;
    font-weight: 600;
  }

  .panel-content strong {
    font-family: 'IBM Plex Sans', sans-serif;
  }

  .projects-grid {
    display: flex;
    flex-direction: column;
    gap: 3rem;
    margin-top: 2rem;
  }

  .project-card {
    display: flex;
    gap: 2rem;
    align-items: center;
    border: 2px solid #000;
    padding: 2rem;
    background: #fff;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .project-card:nth-child(even) {
    flex-direction: row-reverse;
  }

  .project-card:hover {
    transform: translateY(-4px);
    box-shadow: 8px 8px 0 #000;
  }

  .project-image {
    flex: 0 0 40%;
    height: 250px;
    background: #f5f5f5;
    border: 2px solid #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 0.9rem;
    color: #999;
    overflow: hidden;
  }

  .project-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .project-info {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .project-header {
    margin-bottom: 0.75rem;
    text-align: center;
  }

  .project-title {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    color: #000;
  }

  .github-link {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    color: #000;
    text-decoration: underline;
    transition: opacity 0.2s ease;
  }

  .github-link:hover {
    opacity: 0.6;
  }

  .project-description {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 1rem;
    line-height: 1.6;
    color: #333;
    margin: 0;
  }

  .close-button {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    background: transparent;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    padding: 0.5rem;
    line-height: 1;
    color: #000000;
    transition: transform 0.2s ease;
  }

  .close-button:hover {
    transform: scale(1.1);
  }
</style>

<script>
  const canvas = document.getElementById('topoCanvas') as HTMLCanvasElement;
  const ctx = canvas.getContext('2d')!;
  const heroContent = document.getElementById('heroContent')!;
  const contentPanel = document.getElementById('contentPanel')!;
  const panelContent = document.getElementById('panelContent')!;
  const navButtons = document.querySelectorAll('.nav-button');
  const closeButton = document.getElementById('closeButton')!;
  
  let width = window.innerWidth;
  let height = window.innerHeight;
  let time = 0;
  let lineEffect = 'wave'; // 'wave', 'straight', 'split', 'twist', 'converge'
  let targetEffect = 'wave';
  let effectProgress = 0;
  let isPanelOpen = false;

  const content = {
    about: {
      title: 'About Me',
      html: `
        <p>I'm a sophomore at UNC Chapel Hill studying Computer Science and Philosophy with a minor in Music.</p>
        <p>My work so far spans full-stack development, mobile apps, data science, and ML.</p>
        <p>I'm excited about the potential for agentic AI systems to enhance workflows, but I'm also a strong believer in cautious and ethical use of AI.</p>
      `
    },
    resume: {
      title: 'Resume',
      html: `
        <div style="width: 100%; height: 70vh; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: #f5f5f5;">
          <iframe 
            src="/resume.pdf" 
            width="100%" 
            height="100%" 
            style="border: none;"
            title="Resume PDF">
          </iframe>
        </div>
        <a href="/resume.pdf" download style="display: inline-block; padding: 12px 24px; background: #000; color: #fff; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">
          Download PDF
        </a>
        </div>
      `
    },
    projects: {
      title: 'Projects',
      html: `
        <div class="projects-grid">
          <div class="project-card">
            <div class="project-image">
              <img src="/projects/healthcare.png" alt="Healthcare Platform" onerror="this.parentElement.innerHTML='Image placeholder'">
            </div>
            <div class="project-info">
              <div class="project-header">
                <h3 class="project-title">Healthcare Platform</h3>
                <a href="https://github.com/yourusername/healthcare-platform" target="_blank" rel="noopener noreferrer" class="github-link">GitHub →</a>
              </div>
              <p class="project-description">Full-stack healthcare management system built with Next.js, FastAPI, and PostgreSQL. Features Supabase authentication, patient tracking, and real-time updates.</p>
            </div>
          </div>

          <div class="project-card">
            <div class="project-image">
              <img src="/projects/fooddonation.png" alt="Food Donation App" onerror="this.parentElement.innerHTML='Image placeholder'">
            </div>
            <div class="project-info">
              <div class="project-header">
                <h3 class="project-title">Food Donation iOS App</h3>
                <a href="https://github.com/yourusername/food-donation-app" target="_blank" rel="noopener noreferrer" class="github-link">GitHub →</a>
              </div>
              <p class="project-description">Native iOS app in SwiftUI for managing food donations. Handles 10,000+ lbs monthly with Firebase backend, CoreLocation, and real-time sync.</p>
            </div>
          </div>

          <div class="project-card">
            <div class="project-image">
              <img src="/projects/ml-model.png" alt="ML Competition Model" onerror="this.parentElement.innerHTML='Image placeholder'">
            </div>
            <div class="project-info">
              <div class="project-header">
                <h3 class="project-title">ML Competition Model</h3>
                <a href="https://github.com/yourusername/ml-competition" target="_blank" rel="noopener noreferrer" class="github-link">GitHub →</a>
              </div>
              <p class="project-description">Machine learning model using scikit-learn on 700+ record dataset. Features Streamlit visualization dashboard for data insights and model performance.</p>
            </div>
          </div>

          <div class="project-card">
            <div class="project-image">
              <img src="/projects/imagine.jps" alt="image" onerror="this.parentElement.innerHTML='Image placeholder'">
            </div>
            <div class="project-info">
              <div class="project-header">
                <h3 class="project-title">TapIn</h3>
                <a href="https://github.com/tcbarzyk/HackNC-2025" target="_blank" rel="noopener noreferrer" class="github-link">GitHub →</a>
              </div>
              <p class="project-description">TapIn is an iOS app that connects students to real, in-person campus moments. Users can log in with their .edu email, create events under categories like clubs, study sessions, or social meetups, and pin their location directly on a campus map. Others can discover events nearby, tap “Go” to show interest, and navigate to the destination. TapIn also tracks event popularity as more students join, surfacing the most active and trending spots on campus.\nTapIn was built for HackNC 2025 using SwiftUI and Firebase. I led a hackathon team of 4 people to create this app in 24 hours.</p>
            </div>
          </div>

          <div class="project-card">
            <div class="project-image">
              <img src="/projects/tapin.jpeg" alt="Portfolio Website" onerror="this.parentElement.innerHTML='Image placeholder'">
            </div>
            <div class="project-info">
              <div class="project-header">
                <h3 class="project-title">Portfolio Website</h3>
                <a href="https://github.com/yourusername/portfolio-site" target="_blank" rel="noopener noreferrer" class="github-link">GitHub →</a>
              </div>
              <p class="project-description">Custom portfolio site with animated topographic background using Canvas API and Perlin noise. Built with Astro for optimal performance.</p>
            </div>
          </div>
        </div>
      `
    },
    contact: {
      title: 'Contact',
      html: `
        <p><strong>Email:</strong> your.email@example.com</p>
        <p><strong>GitHub:</strong> github.com/yourusername</p>
        <p><strong>LinkedIn:</strong> linkedin.com/in/yourprofile</p>
        <p>Let's build something together.</p>
      `
    }
  };

  function resizeCanvas() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }
  
  resizeCanvas();

  // Interpolated noise for smooth waves
  function interpolate(a: number, b: number, t: number): number {
    return a + (b - a) * t;
  }

  function fade(t: number): number {
    return t * t * t * (t * (t * 6 - 15) + 10);
  }

  function hash(x: number, y: number): number {
    const h = Math.sin(x * 127.1 + y * 311.7) * 43758.5453;
    return h - Math.floor(h);
  }

  function perlinNoise(x: number, y: number): number {
    const xi = Math.floor(x);
    const yi = Math.floor(y);
    const xf = x - xi;
    const yf = y - yi;
    
    const u = fade(xf);
    const v = fade(yf);
    
    const aa = hash(xi, yi);
    const ab = hash(xi, yi + 1);
    const ba = hash(xi + 1, yi);
    const bb = hash(xi + 1, yi + 1);
    
    const x1 = interpolate(aa, ba, u);
    const x2 = interpolate(ab, bb, u);
    
    return interpolate(x1, x2, v);
  }
  function noise(x: number, y: number, time: number, lineIndex: number): number {
    let value = 0;
    let amplitude = 1;
    let frequency = 1;
    
    const lineTimeOffset = lineIndex * 0.3;
    const linePhase = lineIndex * 0.2;
    
    for (let i = 0; i < 3; i++) {
      const nx = (x + time * 15 + lineTimeOffset * 20) * frequency * 0.003;
      const ny = (y + i * 50 + linePhase * 100) * frequency * 0.003;
      value += (perlinNoise(nx, ny) - 0.5) * amplitude;
      amplitude *= 0.5;
      frequency *= 2;
    }
    
    const primaryWave = Math.sin(x * 0.008 + time * 0.6 + lineIndex * 0.3) * 40;
    const secondaryWave = Math.sin(x * 0.015 + time * 0.9 + lineIndex * 0.5) * 20;
    const tertiaryWave = Math.sin(x * 0.004 + time * 0.4 + lineIndex * 0.15) * 25;
    
    return value * 60 + primaryWave + secondaryWave * 0.5 + tertiaryWave * 0.7;
  }

  function applyEffect(baseY: number, waveOffset: number, lineIndex: number, numLines: number): number {
    // Smooth transition between effects
    effectProgress += (targetEffect === lineEffect ? 0 : 0.03);
    if (effectProgress >= 1) {
      lineEffect = targetEffect;
      effectProgress = 0;
    }

    const t = Math.min(effectProgress, 1);
    let effectY = baseY + waveOffset;

    if (targetEffect === 'straight') {
      // Straighten: remove wave
      effectY = baseY + waveOffset * (1 - t);
    } else if (targetEffect === 'split') {
      // Split: push lines apart at center
      const centerDist = lineIndex - numLines / 2;
      const splitOffset = Math.sign(centerDist) * Math.abs(centerDist) * 8 * t;
      effectY = baseY + waveOffset * (1 - t * 0.7) + splitOffset;
    } else if (targetEffect === 'twist') {
      // Twist: diagonal wave pattern
      const twistOffset = Math.sin((lineIndex / numLines) * Math.PI * 2 + time * 0.5) * 50 * t;
      effectY = baseY + waveOffset * (1 - t * 0.5) + twistOffset;
    } else if (targetEffect === 'converge') {
      // Converge: pull lines toward center
      const centerDist = (lineIndex - numLines / 2) / (numLines / 2);
      const convergeOffset = -centerDist * 30 * t;
      effectY = baseY + waveOffset * (1 - t * 0.6) + convergeOffset;
    }

    return effectY;
  }

  function draw() {
    ctx.clearRect(0, 0, width, height);
    
    const numLines = 40;
    const spacing = 15;
    
    for (let i = 0; i < numLines; i++) {
      ctx.beginPath();
      
      const baseY = i * spacing - (numLines * spacing) / 2 + height / 2;
      const centerDist = Math.abs(i - numLines / 2) / (numLines / 2);
      const alpha = 0.3 * (1 - centerDist * 0.6);
      
      ctx.strokeStyle = `rgba(0, 0, 0, ${alpha})`;
      ctx.lineWidth = 2.5;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      
      let firstPoint = true;
      
      for (let x = 0; x <= width; x += 3) {
        const waveOffset = noise(x, baseY, time, i);
        const y = applyEffect(baseY, waveOffset, i, numLines);
        
        if (firstPoint) {
          ctx.moveTo(x, y);
          firstPoint = false;
        } else {
          ctx.lineTo(x, y);
        }
      }
      
      ctx.stroke();
    }
    
    if (lineEffect === 'wave' || effectProgress > 0) {
      time += 0.01;
    }
    
    requestAnimationFrame(draw);
  }

  // Button interactions
  navButtons.forEach(button => {
    button.addEventListener('click', (e) => {
      const section = (e.target as HTMLElement).dataset.section!;
      const sectionContent = content[section as keyof typeof content];
      
      if (!isPanelOpen) {
        isPanelOpen = true;
        
        // Set line effect based on section
        if (section === 'about') targetEffect = 'straight';
        else if (section === 'resume') targetEffect = 'split';
        else if (section === 'projects') targetEffect = 'twist';
        else if (section === 'contact') targetEffect = 'converge';
        
        heroContent.classList.add('hidden');
        panelContent.innerHTML = `<h2>${sectionContent.title}</h2>${sectionContent.html}`;
        setTimeout(() => {
          contentPanel.classList.add('visible');
        }, 300);
      }
    });
  });

  closeButton.addEventListener('click', () => {
    if (isPanelOpen) {
      isPanelOpen = false;
      targetEffect = 'wave';
      contentPanel.classList.remove('visible');
      setTimeout(() => {
        heroContent.classList.remove('hidden');
      }, 300);
    }
  });

  window.addEventListener('resize', resizeCanvas);
  draw();
</script>
